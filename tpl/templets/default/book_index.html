<html style="font-size: 41.1px;">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="Content-Language" content="zh-CN">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <title>
        <!--{$data.other_name}-->
        <!--{__ LoveNovel}-->
    </title>
    <meta name="keywords" content="<!--{$data.other_name}--> <!--{__ 多语言免费、流行、浪漫、小说,漫画阅读器.}-->">
    <meta name="description" itemprop="description" content=" <!--{$data.desc}--> <!--{__ LoveNovel}-->">

    <meta http-equiv="Cache-Control" content="no-siteapp">
    <meta http-equiv="Cache-Control" content="no-transform">
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="canonical" href="https://www.love-novel.com/">
    <meta name="applicable-device" content="mobile">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <meta content="yes" name="apple-touch-fullscreen">
    <meta name="browsermode" content="application">
    <meta name="msapplication-tap-highlight" content="no">
    <meta content="telephone=no" name="format-detection">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="mobile-web-app-capable">
    <meta name="apple-mobile-web-app-status-bar-style" content="#999">
    <meta name="screen-orientation" content="portrait">
    <meta name="full-screen" content="yes">
    <meta name="x5-fullscreen" content="true">
    <meta name="360-fullscreen" content="true">
    <meta name="browsermode" content="application">
    <meta name="x5-orientation" content="portrait">
    <meta name="x5-pagetype" content="webapp">
    <!-- 分享标签 -->
    <meta itemprop="name" content="<!--{$data.other_name}-->">
    <meta itemprop="image" content="<!--{$data.bpic}-->">
    <meta property="og:type" content="novel">
    <meta property="og:title" content="<!--{$data.other_name}-->">
    <meta property="og:description" content="<!--{$data.desc}-->">
    <meta property="og:image" content="<!--{$data.bpic}-->">
    <meta property="og:novel:category" content="<!--{$sahretag}-->">
    <meta property="og:novel:author" content="<!--{$data.writer_name}-->">
    <meta property="og:novel:book_name" content="<!--{$data.other_name}-->">
    <meta property="og:novel:read_url" content="<!--{$url}-->">
    <meta property="og:url" content="<!--{$url}-->">
    <meta property="og:novel:status" content="<!--{if $data.update_status==1}--><!--{__ 完结}--><!--{else}--><!--{__ 连载}--><!--{/if}-->">
    <meta property="og:novel:update_time" content="<!--{$data.new_section_time|date_format:'%Y-%m-%d'}-->">
    <meta property="og:novel:latest_chapter_name" content="  <!--{$data.new_section_title}-->">
    <meta property="og:novel:latest_chapter_url" content='<!--{url action="sec" args="id:$data.new_section_id,bookid:$data.book_id" }-->'>


    <script src="<!--{$staticjs}-->/jquery.min.js"></script>
    <script src="<!--{$indextpl}-->js/swiper.min.js"></script>
    <script src="<!--{$static}-->js/night_Trad.v1.0.js"></script>
    <script src="<!--{$indextpl}-->js/web.js"></script>
    <script src="<!--{$static}-->js/jsshare.js"></script>
    <script>
        function isMobileHanddle() {
            var e = navigator.userAgent;
            return (screen.width / screen.height < 1 || /AppleWebKit.*Mobile/i.test(e) || /MIDP|SymbianOS|NOKIA|SAMSUNG|LG|NEC|TCL|Alcatel|BIRD|DBTEL|Dopod|PHILIPS|HAIER|LENOVO|MOT-|Nokia|SonyEricsson|SIE-|Amoi|ZTE/.test(e)) && !/ipad/gi.test(e)
        }
        var host = location.host;
        isMobileHanddle() || "m" !== host.substr(0, host.indexOf(".")) || (location.href = location.href.replace("//m.", "//www.")), top.location != location && (top.location = location.href),
            function(i, e) {
                function t() {
                    var e = o.getBoundingClientRect().width;
                    540 < e / s && (e = 540 * s);
                    var t = e / 10;
                    o.style.fontSize = t + "px", m.rem = i.rem = t
                }
                var a, n = i.document,
                    o = n.documentElement,
                    r = n.querySelector('meta[name="viewport"]'),
                    l = n.querySelector('meta[name="flexible"]'),
                    s = 0,
                    d = 0,
                    m = e.flexible || (e.flexible = {});
                if (r) {
                    console.warn("将根据已有的meta标签来设置缩放比例");
                    var c = r.getAttribute("content").match(/initial\-scale=([\d\.]+)/);
                    c && (d = parseFloat(c[1]), s = parseInt(1 / d))
                } else if (l) {
                    var p = l.getAttribute("content");
                    if (p) {
                        var u = p.match(/initial\-dpr=([\d\.]+)/),
                            f = p.match(/maximum\-dpr=([\d\.]+)/);
                        u && (s = parseFloat(u[1]), d = parseFloat((1 / s).toFixed(2))), f && (s = parseFloat(f[1]), d = parseFloat((1 / s).toFixed(2)))
                    }
                }
                if (!s && !d) {
                    var h = (i.navigator.appVersion.match(/android/gi), i.navigator.appVersion.match(/iphone/gi)),
                        v = i.devicePixelRatio;
                    d = 1 / (s = h ? 3 <= v && (!s || 3 <= s) ? 3 : 2 <= v && (!s || 2 <= s) ? 2 : 1 : 1)
                }
                if (o.setAttribute("data-dpr", s), !r)
                    if ((r = n.createElement("meta")).setAttribute("name", "viewport"), r.setAttribute("content", "initial-scale=" + d + ", maximum-scale=" + d + ", minimum-scale=" + d + ", user-scalable=no"), o.firstElementChild) o.firstElementChild.appendChild(r);
                    else {
                        var b = n.createElement("div");
                        b.appendChild(r), n.write(b.innerHTML)
                    }
                i.addEventListener("resize", function() {
                    clearTimeout(a), a = setTimeout(t, 300)
                }, !1), i.addEventListener("pageshow", function(e) {
                    e.persisted && (clearTimeout(a), a = setTimeout(t, 300))
                }, !1), "complete" === n.readyState ? n.body.style.fontSize = 12 * s + "px" : n.addEventListener("DOMContentLoaded", function() {
                    n.body.style.fontSize = 12 * s + "px"
                }, !1), t(), m.dpr = i.dpr = s, m.refreshRem = t, m.rem2px = function(e) {
                    var t = parseFloat(e) * this.rem;
                    return "string" == typeof e && e.match(/rem$/) && (t += "px"), t
                }, m.px2rem = function(e) {
                    var t = parseFloat(e) / this.rem;
                    return "string" == typeof e && e.match(/px$/) && (t += "rem"), t
                }
            }(window, window.lib || (window.lib = {})), window.shareConf = null
    </script>
    <link href="<!--{$indextpl}-->css/vendor.38cae4.css" rel="stylesheet">
    <link href="<!--{$indextpl}-->css/entry.index.53baaf.css" rel="stylesheet">
    <link href="<!--{$indextpl}-->css/swiper.min.css" rel="stylesheet">
    <link href="<!--{$static}-->css/jsshare.css" rel="stylesheet">
</head>

<body style="font-size: 12px;">

    <section class="view-port" style="background-color: rgb(255, 255, 255); ">
        <header class="view-header comic-detail-header">
            <div id="js_top_nav" class="header-wrap header-wrap-normal" style=" "><i id="js_change_bg" class="change-bg "></i>
                <div class="header-left"><span class="header-icon js_go_back"><i class="ift-back white"></i> </span><a class="header-icon" href="/" title="<!--{__ 首页}-->"><i class="ift-home white"></i></a></div>
                <div class="header-center top-title js_top_title" style="visibility: visible;">
                    <h1 id="js_comic-title" class="header-title" data-id="107751" data-newid="xiuluojianzun" title="<!--{$data.other_name}-->">
                        <!--{$data.other_name}-->
                    </h1>

                </div>

                <div class="header-right">
                    <div class="header-icon js_share" title="<!--{$data.other_name}-->" pic='<!--{$data.bpic}-->' url=''><i class="ift-share white"></i></div>
                </div>

            </div>

        </header>
        <article class="view-body detail-body aaalecj6y" id="js_comic_main" style="background:#fff">
            <div id="detail" class="comic-header js_comic_header" data-comicid="107751" style="background-image:url('<!--{$data.bpic}-->')">
                <div class="comic-info">
                    <div class="book-name">
                        <h1 class="name" data-allprice="8361" title="<!--{$data.other_name}-->">
                            <!--{$data.other_name}--><span class="author">
                                <!--{$data.author}-->
                            </span>
                        </h1>
                        <ul class="types">
                            <li class="liting">
                                <!--{__ 人气}-->
                            </li>
                            <li class="count">
                                <!--{$data.read}-->
                                <!--{__ 万}-->
                            </li>

                        </ul>
                        <div class="comic-info-detail">
                            <ul class="stars">
                                <li class="item fullStar"></li>
                                <li class="item fullStar"></li>
                                <li class="item fullStar"></li>
                                <li class="item fullStar"></li>
                                <li class="item fullStar"></li>
                                <li class="item raft" style="
                                margin-left: 0.1rem;
                            ">
                                    <!--{$data.replynum}-->
                                </li>
                            </ul>
                            <ul class="types">
                                <!--{foreach $data.tags as $k=>$v}-->
                                <!--{if $v}-->


                                <li>
                                    <a class="type" href='<!--{url action=' lable ' mod=' category '
                                        args="c1:$data.type,c2:$data.category_id,c3:$data.cate_id,c4:$v.id,lable:$v.tag"
                                        }-->' title="
                                        <!--{$v.tag}-->">
                                        <!--{$v.tag}-->
                                    </a>
                                </li>
                                <!--{/if}-->
                                <!--{/foreach}-->


                            </ul>
                        </div>
                    </div>
                    <div class="book-cover comic-item">
                        <div class="thumbnail" style="border: 2px solid #fff"><img src="<!--{$indextpl}-->imgs/space.gif" alt="<!--{$data.other_name}-->" style="background: url(&quot;<!--{$data.bpic}-->&quot;) center center / cover no-repeat; opacity: 1;">
                            <!-- <span class="origin"></span> -->
                        </div>
                    </div>
                </div>
            </div>
            <section class="comic-intro">
                <div class="radius-box">
                    <div class="radius"></div>
                </div>
                <div class="btn-menu">
                    <div id="collection" class="collectfather btn-menu-item button <!--{if $inrack}--> disabled
                    <!--{else}-->
                    <!--{/if}-->">

                        <span>
                            <!--{__ 收藏}-->
                        </span> <span class="js_collect_num">
                            <!--{$data.rack}-->
                        </span>
                        <!--{__ 万}-->
                    </div>
                    <div class="startReadfather btn-menu-item button" <!--{if $his}-->
                        readsec='
                        <!--{$his.watch_nums}-->'
                        <!--{/if}-->>
                        <!--{__ 开始阅读}-->
                    </div>
                    <div class="tucaofather js_tucao btn-menu-item button">
                        <a href="#COMMENT">


                            <span>
                                <!--{__ 点评}-->
                            </span> <span class="js_collect_num">
                                <!--{$data.replynum}-->
                            </span>
                        </a>
                    </div>
                </div>
                <div class="intro-text">
                    <p id="js_desc_content" class="js_over_text_spread intro-text-wrapper">
                        &nbsp;&nbsp;
                        <!--{$data.desc}-->
                    </p><i id="js_toggle_desc" class="ift-right js_overText"></i>
                </div>
            </section>

            <section id="catalog" class="card-box lianzai">

                <div class="card-box-head dow comic-chapter">
                    <div class="left">

                        <h3 class="title">
                            <!--{if $data.update_status==1}-->
                            <!--{__ 完结}-->
                            <!--{else}-->
                            <!--{__ 连载}-->
                            <!--{/if}-->
                        </h3>
                        <div id="js_chapter-reverse" class="switch asc">
                            <i class="chapter-rank desc" id="js_chapter_rank"></i>
                            <span class="update_time">
                                <!--{$data.new_section_time|date_format:"%Y-%m-%d"}-->
                            </span>
                            <a href='<!--{url action="sec" args="id:$data.new_section_id,bookid:$data.book_id" }-->'>
                                <span class="last-chapter">
                                    <!--{$data.new_section_title}-->
                                </span></a>
                        </div>
                    </div>
                </div>
                <div class="chapter-list" id="js_chapter_list">
                    <ul id="js_chapters" class="asc">
                        <!--{foreach $seclist as $sec}-->
                        <li class="comic-chapter-item" data-index="<!--{$sec.section_id}-->" data-chapterid="<!--{$sec.section_id}-->">
                            <a class="comic-chapter-link" href='<!--{url action="sec" args="id:$sec.section_id,bookid:$data.book_id" }-->' title="
                                <!--{$sec.title}-->">
                                <span1>
                                    <!--{$sec.title}-->
                                </span1>
                                <!--{if $sec.isfree}-->
                                <!--{if $sec.ispay}-->
                                <i class="ift-unlock js_lock"></i>
                                <!--{else}-->
                                <i class="ift-lock js_lock"></i>
                                <!--{/if}-->
                                <!--{/if}-->
                            </a>
                        </li>
                        <!--{/foreach}-->

                    </ul>
                    <div class="more-chapter more-chapter-wrapper js_chapter_btn"><span class="js_more_chapters more-chapter-btn">
                            <!--{__ 查看全部}--><i class="ift-down arrow-direction"></i>
                        </span></div>
                </div>
            </section>
            <div id="detail_ad_2"></div>



            <div class="comic-box recommend-box" id="recommend">
                <div class="bd">
                    <!--{if $similar|sizeof}-->
                    <div data-tpl="2" class="tpl-2 mult sow">
                        <div class="mult-head">
                            <h2 class="left mult-caption"><span class="mult-title">
                                    <!--{__ 猜你喜欢}-->
                                </span></h2>
                            <div class="mult-style-func">
                                <div class="mult-change" key="66246" horizonratio="3:4"><i class="icon-change"></i>
                                </div>
                            </div>
                        </div>
                        <div class="mult-body">
                            <ul class="mult-warp siw">
                                <!--{foreach $similar as $k=>$v}-->

                                <li class="card r1c3"><a href='<!--{url args="bookid:{$v.book_id},title:{$v.other_name}"}-->' '
                                        title="
                                        <!--{$v.other_name}-->">
                                        <div class="card-graph r3x4"><img class="lazy-image"
                                                src="<!--{$indextpl}-->imgs/space.gif" alt="<!--{$v.other_name}-->"
                                                style="background: url(' <!--{$v.bpic}-->') center center / cover
                                        no-repeat; opacity: 1;">
                                        <div class="abs-bottom">
                                            <div class="card-title">
                                                <!--{$v.other_name}-->

                                            </div>
                                            <ul class="tags-list">

                                                <!--{foreach $v.tags  as $k1=>$v1}-->
                                                <!--{if $v1}-->


                                                <li class="item" data-id="<!--{$v1.id}-->">
                                                    <!--{$v1.tag}-->
                                                </li>
                                                <!--{/if}-->
                                                <!--{/foreach}-->


                                            </ul>
                                        </div>
                        </div>
                        <div class="card-text"><i class="lbl-bar ift-fire"></i>
                            <!--{$v.read}-->
                            <!--{__ 万}-->
                        </div>
                        </a></li>
                                <!--{/foreach}-->
                            </ul>
                        </div>
                    </div>
                    <!--{/if}-->
                    <!--{if $author}-->


                    <div data-tpl="2" class="tpl-2 mult sow">
                        <div class="mult-head">
                            <h2 class="left mult-caption"><span class="mult-title">
                                <!--{__ 作者书籍}-->
                            </span></h2>
                            <div class="mult-style-func">
                                <div class="mult-change" key="66247" horizonratio="3:4"><i class="icon-change"></i>
                                </div>
                            </div>
                        </div>
                        <div class="mult-body">
                            <ul class="mult-warp siw">
                                <!--{foreach $author as $k=>$v}-->

                                <li class="card r1c3"><a href='<!--{url args="bookid:{$v.book_id},title:{$v.other_name}"}-->' '
                                        title="
                                        <!--{$v.other_name}-->">
                                        <div class="card-graph r3x4"><img class="lazy-image"
                                                src="<!--{$indextpl}-->imgs/space.gif" alt="<!--{$v.other_name}-->"
                                                style="background: url(' <!--{$v.bpic}-->') center center / cover
                                    no-repeat; opacity: 1;">
                                    <div class="abs-bottom">
                                        <div class="card-title">
                                            <!--{$v.other_name}-->

                                        </div>
                                        <ul class="tags-list">
                                            <!--{foreach $v.tags  as $k1=>$v1}-->
                                            <!--{if $v1}-->


                                            <li class="item" data-id="<!--{$v1.id}-->">
                                                <!--{$v1.tag}-->
                                            </li>
                                            <!--{/if}-->
                                            <!--{/foreach}-->

                                        </ul>
                                    </div>
                    </div>
                    <div class="card-text"><i class="lbl-bar ift-fire"></i>
                        <!--{$v.read}-->
                        <!--{__ 万}-->
                    </div>
                    </a></li>
                                <!--{/foreach}-->
                            </ul>
                        </div>
                    </div>
                    <!--{/if}-->
                </div>
            </div>

            <div class="up-chapter-list js_up_chapterList">
                <div class="list-content">
                    <!-- <div class="comic-collect" id="js_btn_collect"><span class="list-collect-num">129万</span> <span
                            class="js_colloect_logo js_collect collect-info-logo collect-logo"></span></div> -->
                    <div class="close-list">
                        <div class="close-content"><span>
                                <!--{__ 这里折叠}-->
                            </span><span class="ift-top"></span></div>
                    </div>
                    <!-- <div class="tucao-page"><span id="js_tocao-logo" class="tocao-logo"></span><span
                            class="list-tucao-num">32689</span></div> -->
                </div>
            </div>
            <div class="comic-box comment-box" id="COMMENT" data-ssid="108680">
                <div class="hd">
                    <h2 class="comic-icon-title">
                        <!--{__ 留言}-->
                    </h2>
                </div>
                <div class="comment">
                    <div class="comment-hd" style="border: none;">

                        <span class="comment-number"><strong id="js_comment_number">
                                <!--{$discussd.count}-->
                            </strong>
                            <!--{__ 条评论}-->
                        </span>
                    </div>
                    <div class="comment-bd">
                        <div class="comment-textarea-box">
                            <div class="comment-textarea-box-bd">
                                <textarea class="comment-textarea" maxlength="100" placeholder="<!--{__ 有事没事说两句}-->..."></textarea>
                                <!-- <span class="comment-input-num">0/500</span> -->
                            </div>
                            <div class="comment-textarea-box-ft">

                                <ul class="pfstars">



                                    <li class="item pfstar ">★</li>
                                    <li class="item pfstar ">★</li>
                                    <li class="item pfstar ">★</li>
                                    <li class="item pfstar ">★</li>
                                    <li class="item pfstar ">★</li>

                                </ul>
                                <span style="flex: 1;">
                                </span>
                                <button class="comment-submit js_submit_comment" data-uid="" data-id="" type="button">
                                    <!--{__ 吐槽一下}-->
                                </button>
                            </div>
                        </div>
                        <div class="comment-noinfo" id="js_comment_noinfo" style="display: block;">
                            <p>
                                <!--{__ 评论正在审核中}-->~
                            </p>
                        </div>
                        <div class="comment-more-box" id="js_comment_more_box" style="display: none;"><span id="js_comment_more" class="comment-more">查看更多</span></div>
                    </div>
                </div>
            </div>

        </article>
    </section>



    <style>
        .pfstars {
            white-space: nowrap;
            text-align: center;
            /* margin-top: 20px;
            margin-bottom: 20px; */
        }
        
        .comment-textarea-box-ft {
            display: flex;
            flex-direction: row;
            align-content: center;
            justify-items: center;
            justify-content: space-between;
            align-content: flex-start;
            align-items: center;
        }
        
        i.js_lock {
            float: right;
            margin-right: 0.3rem;
        }
        
        i.ift-unlock.js_lock {
            color: #fc6976;
        }
        
        .pfstars li {
            display: inline-block;
            color: #ffce06;
            font-size: 30px;
        }
        
        .guide-hd-banner {
            box-sizing: border-box;
            position: fixed;
            z-index: 9999;
            left: 0;
            top: 0;
            height: 48px;
            width: 100%;
            padding: 6px 84px 10px 72px;
            background-color: rgba(0, 0, 0, .8);
            transition: top .2s ease-out;
            -webkit-transition: top .2s ease-out;
        }
        
        .guide-hd-banner .guide-close {
            position: absolute;
            left: 4px;
            top: 50%;
            display: block;
            height: 24px;
            width: 24px;
            margin-top: -12px;
            background: url('<!--{$indextpl}-->images/close.png') no-repeat center;
            background-size: 8px 8px;
        }
        
        .guide-hd-banner .guide-logo {
            position: absolute;
            left: 32px;
            top: 8px;
            display: block;
            height: 32px;
            width: 32px;
            border-radius: 4px;
        }
        
        .guide-hd-banner .guide-title {
            height: 18px;
            font-size: 12px;
            line-height: 18px;
            font-weight: normal;
            color: white;
            word-break: break-all;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        
        .guide-hd-banner .guide-desc {
            height: 16px;
            font-size: 10px;
            line-height: 16px;
            color: white;
            word-break: break-all;
            white-space: nowrap;
            text-overflow: ellipsis;
            overflow: hidden;
        }
        
        .guide-hd-banner .guide-btn {
            position: absolute;
            right: 12px;
            top: 12px;
            display: block;
            height: 25px;
            width: 64px;
            border-radius: 4px;
            font-size: 12px;
            line-height: 25px;
            text-align: center;
            color: white;
            background-color: #FC6976;
        }
        
        div#collection.disabled {
            background: #bfbfbf;
        }
    </style>

    <script>
        //初始化banner高度，宽高比。0.73
        var isClicked = false;
        var beforeClickedIndex = -1;
        var clickNum = 0; //点击同一颗星次数
        var pfstar = 5;
        $bookid = "<!--{$data.book_id}-->";
        $type = "<!--{$data.type}-->";
        $sid = 0;
        $pg = 0;
        //初始话阅读指针，先判断缓存，无缓存就从接口取然后更新缓存
        function initreadpoint() {
            $index = 'pageindex' + $bookid + '_' + $type;
            $index = getCookie($index);
            if ($index) {
                arr = $index.split('.');
                $sid = arr[0];
                $pg = arr[1];
                //取缓存指针
            } else {
                //取远程指针
                //更新缓存
                $url = "<!--{url action='readpoint' mod='rack' args=''}-->";
                $groom = '<!--{$inrack}-->';
                $data = {
                    'bookid': $bookid,
                    'type': $type,
                    'groom': $groom
                };
                yAjax($url, $data, function(data) {
                    $ret = data.result;
                    // d($ret);
                    if ($ret) {
                        $sid = $ret;
                        setCookie($index, $sid + '.' + $pg);
                    }
                });
            }

        }
        $(function() {
            initreadpoint();
            $('.comic-chapter-link').each(function(i, v) {
                $sp = $(v).children('span1');
                $sp.text(trim($sp.text()));
            });
            $securl = '<!--{url args="bookid:$data.book_id" action="sec"}-->';
            $('.startReadfather').click(function() {
                initreadpoint();
                $gourl = $securl + "?id=" + $sid + "&page=" + $pg;

                _go_url($gourl);
            });
            initshare('<!--{__ 分享}-->', '', $('.js_share'));
            $fs = $('.raft').text();
            $val = Number($fs).toFixed(1);
            $('.raft').text($val);
            $('.stars').find('.fullStar').remove();
            $min = Number($fs).toFixed(0);
            $obj = $('.stars');
            $li = $('<li class="item "></li>');
            for (let index = 1; index <= 5; index++) {
                if (index < $min) {
                    $tmp = $li.clone().addClass('fullStar');

                } else {
                    if (index == $min && $val != index) {


                        $tmp = $li.clone().addClass('halfStar1');
                    } else {
                        if (($val - $min) == 0) {
                            $tmp = $li.clone().addClass('fullStar');
                        } else {
                            $tmp = $li.clone().addClass('halfStar0');
                        }

                    }

                }
                $obj.append($tmp);
            }
            $obj.append($('.raft'));

            $('.pfstar').hover(
                function() {

                    if (!isClicked) {
                        $(this).css('color', '#ffce06');
                        var index = $(this).index();
                        pfstar = index + 1;
                        for (var i = 0; i <= index; i++) {
                            $('.pfstar:nth-child(' + i + ')').css('color', '#ffce06');
                        }
                    }
                },
                function() {

                    if (!isClicked) {
                        $('.pfstar').css('color', '#ADADAD');
                    }
                }
            );
            //星星点击事件
            $('.pfstar').click(function() {
                $('.pfstar').css('color', '#ADADAD');
                isClicked = true;
                var index = $(this).index();
                pfstar = index + 1;
                for (var i = 1; i <= index + 1; i++) {
                    $('.pfstar:nth-child(' + i + ')').css('color', '#ffce06');
                }
                if (index == beforeClickedIndex) { //两次点击同一颗星星 该星星颜色变化
                    clickNum++;
                    if (clickNum % 2 == 1) {
                        $('.pfstar:nth-child(' + (index + 1) + ')').css('color', '#ADADAD');
                    } else {
                        $('.pfstar:nth-child(' + (index + 1) + ')').css('color', '#ffce06');
                    }
                } else {
                    clickNum = 0;
                    beforeClickedIndex = index;
                }
            });
            $('.js_submit_comment').click(function() {

                $star = pfstar;
                $content = $('.comment-textarea').val();
                if ($content.length == 0) {
                    $('.comment-textarea').focus();
                    return false;
                }
                $url = "<!--{url mod='me' action='discuss'}-->";
                $('.comment-textarea').val('');
                yAjax($url, {
                    'bookid': $bookid,
                    'type': $type,
                    'star': $star,
                    'content': $content,
                }, function(data) {

                    switch (data.code + '') {
                        case '-1':
                            _go_url(data.result);
                            break;
                        case '0':
                            showd(data.msg);

                            break;
                        case '1':
                            showd(data.result);
                            break;
                        default:
                            showd(data.msg);
                            break;
                    }
                });

            });
            $('#collection').click(() => {
                $bool = $('#collection').hasClass('disabled');
                $bool ? '' : addrack();
            });
        });


        function addrack() {
            $url = "<!--{url mod='rack' action='add'}-->";
            yAjax($url, {
                'book_id': $bookid,
                'type': $type,
            }, function(data) {
                d(data);
                switch (data.code + '') {
                    case '-1':
                        _go_url(data.result);
                        break;
                    case '0':
                        showd(data.msg);
                        break;
                    case '1':
                        // showd(data.result);
                        $('#collection').addClass('disabled');
                        break;
                    default:
                        showd(data.msg);
                        break;
                }
            })

        }
    </script>
</body>

</html>